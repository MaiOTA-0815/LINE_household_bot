# ğŸ“Š LINE Household Botï¼ˆLINEå®¶è¨ˆç°¿Botï¼‰

**æ—¥æœ¬èª | [English](#-english-version)**  

---

## ğŸ“ æ¦‚è¦
LINEã§å…¥åŠ›ã—ãŸæ”¯å‡ºã‚’ã€AWS LambdaçµŒç”±ã§Notionã«è‡ªå‹•ç™»éŒ²ã™ã‚‹Botã§ã™ã€‚  
æ—¥ã€…ã®å®¶è¨ˆç®¡ç†ã‚’LINEä¸Šã§ç°¡å˜ã«è¨˜éŒ²ã§ãã¾ã™ã€‚

---

## ğŸ›  ä½¿ç”¨æŠ€è¡“
- Python 3.10  
- Flask  
- LINE Messaging APIï¼ˆline-bot-sdkï¼‰  
- Notion APIï¼ˆnotion-clientï¼‰  
- AWS Lambda + API Gatewayï¼ˆZappaï¼‰  
- Git / GitHub  

---

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
1. **ä»®æƒ³ç’°å¢ƒã®ä½œæˆã¨æœ‰åŠ¹åŒ–**
    ```bash
    python -m venv venv
    source venv/Scripts/activate  # Windowsï¼ˆGit Bashï¼‰
    ```

2. **ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
    ```bash
    pip install -r requirements.txt
    ```

3. **`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**  
   ä»¥ä¸‹ã‚’è¨˜è¼‰ã—ã€`.gitignore`ã§Gitç®¡ç†å¯¾è±¡å¤–ã«ã—ã¾ã™ã€‚
    ```
    LINE_CHANNEL_ACCESS_TOKEN=ã‚ãªãŸã®ãƒˆãƒ¼ã‚¯ãƒ³
    LINE_CHANNEL_SECRET=ã‚ãªãŸã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ
    NOTION_TOKEN=ã‚ãªãŸã®Notionãƒˆãƒ¼ã‚¯ãƒ³
    DATABASE_ID=ã‚ãªãŸã®Notionãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ID
    ```

4. **ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒèµ·å‹•**
    ```bash
    python line-bot-server.py
    ```

5. **ãƒ†ã‚¹ãƒˆç”¨ã«å…¬é–‹ï¼ˆNgrokï¼‰**
    ```bash
    ngrok http 5000
    ```
    å‡ºåŠ›ã•ã‚ŒãŸURLã‚’LINE Developersã®Webhook URLã«è¨­å®šã€‚

---

## â˜ ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆAWS Lambdaï¼‰
1. åˆå›ãƒ‡ãƒ—ãƒ­ã‚¤  
    ```bash
    zappa deploy dev
    ```
2. æ›´æ–°æ™‚  
    ```bash
    zappa update dev
    ```
3. LINE Developersã®Webhook URLã‚’ã€Zappaç™ºè¡Œã®API Gateway URLã«å¤‰æ›´ã€‚

---

## ğŸ“© ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
2025/08/01 é£Ÿè²» 1200 ã‚¹ãƒ¼ãƒ‘ãƒ¼ã§è²·ã„ç‰©

**Notionç™»éŒ²é …ç›®**  
- æ—¥ä»˜ï¼š2025/08/01  
- ã‚«ãƒ†ã‚´ãƒªï¼šé£Ÿè²»  
- é‡‘é¡ï¼š1200  
- ãƒ¡ãƒ¢ï¼šã‚¹ãƒ¼ãƒ‘ãƒ¼ã§è²·ã„ç‰©  

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–
- `.env`ã‚„`zappa_settings.json`ã¯`.gitignore`æ¸ˆã¿  
- æ©Ÿå¯†æƒ…å ±ã¯AWS Lambdaã®ç’°å¢ƒå¤‰æ•°ã«ç™»éŒ²  

---

## ğŸ“ ä»Šå¾Œã®TODOï¼ˆã‚¢ã‚¤ãƒ‡ã‚¢ï¼‰
- ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’CloudWatchã«é›†ç´„  
- Notionã§é€±æ¬¡ãƒ»æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã€äºˆç®—è¶…éã‚¢ãƒ©ãƒ¼ãƒˆã‚’LINEé€ä¿¡  
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å®šå‹åŒ–ãƒ»è‡ªç„¶è¨€èªå‡¦ç†å¯¾å¿œ  
- ä»®æƒ³è²¯é‡‘ã‚„ä»®æƒ³æŠ•è³‡æ©Ÿèƒ½ã®è¿½åŠ   

---

## ğŸ™ Special Thanks
- LINE Messaging API  
- Notion API  
- Zappa  
- ChatGPT  

---

# ğŸŒ English Version

---

## ğŸ“ Overview
LINE Household Bot automatically records your expenses in Notion via AWS Lambda.  
You can easily track your daily spending directly from LINE.

---

## ğŸ›  Technologies Used
- Python 3.10  
- Flask  
- LINE Messaging API (line-bot-sdk)  
- Notion API (notion-client)  
- AWS Lambda + API Gateway (Zappa)  
- Git / GitHub  

---

## ğŸš€ Setup (Local)
1. **Create and activate a virtual environment**
    ```bash
    python -m venv venv
    source venv/Scripts/activate  # For Windows (Git Bash)
    ```

2. **Install dependencies**
    ```bash
    pip install -r requirements.txt
    ```

3. **Create `.env` file**  
   Add the following and make sure `.env` is listed in `.gitignore`:
    ```
    LINE_CHANNEL_ACCESS_TOKEN=YourToken
    LINE_CHANNEL_SECRET=YourSecret
    NOTION_TOKEN=YourNotionToken
    DATABASE_ID=YourNotionDatabaseID
    ```

4. **Run the local server**
    ```bash
    python line-bot-server.py
    ```

5. **Expose locally with Ngrok**
    ```bash
    ngrok http 5000
    ```
    Set the generated URL as your Webhook URL in LINE Developers.

---

## â˜ Deployment (AWS Lambda)
1. Initial deploy:  
    ```bash
    zappa deploy dev
    ```
2. Update:  
    ```bash
    zappa update dev
    ```
3. Update your Webhook URL in LINE Developers to the API Gateway URL generated by Zappa.

---

## ğŸ“© Message Format
